---
image: /generated/articles-docs-ffmpeg.png
title: 安装 FFmpeg
sidebar_label: 安装 FFmpeg
crumb: "(you don't have to)"
---

:::info
自 Remotion v4.0 起，Remotion 预装了一个轻量级版本的 FFmpeg。不再需要安装 FFmpeg。
:::

## Remotion V3 中的 FFmpeg

**以下文档是关于 v3.0 版本中 FFmpeg 工作方式的存档。**

Remotion 需要 FFmpeg 来编码视频。自 v3.3 版本以来，您无需手动安装 FFmpeg。本页面记录了需要对 Remotion 进行高级控制的开发人员的 Remotion 行为。

### `ffmpeg` 和 `ffprobe`

Remotion 需要两个二进制文件：`ffmpeg` 和 `ffprobe`。在文档中提到 FFmpeg 时，也可能指的是 FFprobe。

### 自动安装

当渲染视频时，如果找不到二进制文件，Remotion 将从互联网下载它们并放入您的 `node_modules` 文件夹中。该二进制文件不会添加到您的 `PATH` 中，因此如果您在终端中键入 `ffmpeg`，可能找不到它。但是，Remotion 将能够使用它。

#### 支持的架构

自动安装支持以下平台：

- Linux，x86_64，
- macOS，Intel
- macOS，Apple Silicon
- Windows，x86_64

对于其他平台，您需要提供自己的二进制文件。

#### 触发自动安装

通过渲染视频，将自动触发 FFmpeg 的下载。

在服务器上，在第一次渲染之前安装二进制文件可能很有用，这样一旦第一次渲染开始，就不会浪费时间。

- 使用 CLI，您可以运行 [`npx remotion install ffmpeg`](/docs/cli/install) 和 `npx remotion install ffprobe` 来触发二进制文件的自动安装。如果二进制文件存在，则该命令将不执行任何操作。这需要安装 `@remotion/cli`。
- [`@remotion/renderer`](/docs/renderer) 包公开了 [`ensureFfmpeg()`](/docs/renderer/ensure-ffmpeg) 和 [`ensureFfprobe()`](/docs/renderer/ensure-ffprobe) 函数

### 优先级顺序

如果提供了多个二进制文件，则其优先级顺序如下：

- 如果使用了 `ffmpegExecutable` 或 `ffprobeExecutable` 选项提供了二进制文件，则将使用该文件。
- 如果 `ffmpeg` 或 `ffprobe` 在 `PATH` 中，将使用它。
- 如果之前由 Remotion 安装到 `node_modules` 中的二进制文件，则将使用它。
- 如果可以从互联网下载二进制文件，则 Remotion 将这样做并使用它。
- 如果根据上述逻辑未找到任何二进制文件，则操作失败。
