---
image: /generated/articles-docs-lambda-renderstillonlambda.png
id: renderstillonlambda
title: renderStillOnLambda()
slug: /lambda/renderstillonlambda
crumb: "Lambda API"
---

在 lambda 函数内呈现静态图像，并将其写入指定的输出位置。

如果要呈现视频或音频，请改用 [`renderMediaOnLambda()`](/docs/lambda/rendermediaonlambda)。

如果要在本地呈现静态图像，请改用 [`renderStill()`](/docs/renderer/render-still)。

## 示例

```tsx twoslash
// @module: esnext
// @target: es2017
import { renderStillOnLambda } from "@remotion/lambda/client";

const { estimatedPrice, url, sizeInBytes } = await renderStillOnLambda({
  region: "us-east-1",
  functionName: "remotion-render-bds9aab",
  serveUrl:
    "https://remotionlambda-qg35eyp1s1.s3.eu-central-1.amazonaws.com/sites/bf2jrbfkw",
  composition: "MyVideo",
  inputProps: {},
  imageFormat: "png",
  maxRetries: 1,
  privacy: "public",
  envVariables: {},
  frame: 10,
});
```

:::note
最好从 `@remotion/lambda/client` 导入此函数，以避免 [在无服务器函数内](/docs/lambda/light-client) 出现问题。
:::

## 参数

具有以下属性的对象：

### `region`

Lambda 函数部署的区域。强烈建议您的 Remotion 站点也位于同一区域。

### `functionName`

部署的 Lambda 函数的名称。
使用 [`deployFunction()`](/docs/lambda/deployfunction) 创建新函数，并使用 [`getFunctions()`](/docs/lambda/getfunctions) 获取当前部署的 Lambdas。

### `serveUrl`

指向 Remotion 项目的 URL。使用 [`deploySite()`](/docs/lambda/deploysite) 部署 Remotion 项目。

### `composition`

要呈现的 [composition](/docs/composition) 的 `id`。

### `inputProps`

[传递给视频所选 composition 的输入属性。](/docs/passing-props#passing-input-props-in-the-cli)。  
必须是 JSON 对象。  
从根组件可以使用 [`getInputProps()`](/docs/get-input-props) 读取属性。  
您可以使用 [`calculateMetadata()`](/docs/calculate-metadata) 转换输入属性。

### `privacy`

其中之一：

- `"public"`（_默认_）：呈现的静态图像在 S3 URL 下是公开可访问的。
- `"private"`：呈现的静态图像不是公开可用的，但可以使用 [presignUrl()](/docs/lambda/presignurl) 创建签名链接。
- `"no-acl"`（_从 v.3.1.7 开始提供_）：ACL 选项根本不设置，如果您要写入不支持 ACL 的另一个存储桶，则此选项很有用，使用 [`outName`](#outname)。

### `frame?`

_可选 - 默认 `0`_

应该呈现哪个合成的帧。帧是从零开始索引的。

从 v3.2.27 开始，允许负值，-1 表示最后一帧。

### `imageFormat?`

_可选 - 默认 `"png"`_

请参阅 [`renderStill() -> imageFormat`](/docs/renderer/render-still#imageformat)。

### `onInit?`<AvailableFrom v="4.0.6" />

在渲染开始时调用的回调函数，有助于在渲染失败时获取日志链接。

它接收一个具有以下属性的对象：

- `renderId`：渲染的 ID。
- `cloudWatchLogs`：Lambda 函数的 CloudWatch 日志链接，如果您没有禁用它。
- `lambdaInsightsUrl`<AvailableFrom v="4.0.61" />：[Lambda 洞察](/docs/lambda/insights)的链接，如果您启用了它。

示例用法：

```tsx twoslash
// @module: esnext
// @target: es2022

import {
  renderStillOnLambda,
  RenderStillOnLambdaInput,
} from "@remotion/lambda/client";

const otherParameters: RenderStillOnLambdaInput = {
  region: "us-east-1",
  functionName: "remotion-render-bds9aab",
  serveUrl:
    "https://remotionlambda-qg35eyp1s1.s3.eu-central-1.amazonaws.com/sites/bf2jrbfkw",
  composition: "MyVideo",
  inputProps: {},
  imageFormat: "png",
  maxRetries: 1,
  privacy: "public",
  envVariables: {},
  frame: 10,
};
await renderStillOnLambda({
  ...otherParameters,
  onInit: ({ cloudWatchLogs, renderId, lambdaInsightsUrl }) => {
    console.log(console.log(`Render invoked with ID = ${renderId}`));
    console.log(`CloudWatch logs (if enabled): ${cloudWatchLogs}`);
    console.log(`Lambda Insights (if enabled): ${lambdaInsightsUrl}`);
  },
});
```

### `jpegQuality?`

_可选_

设置生成的 JPEG 图像的质量。必须是介于 0 和 100 之间的整数。默认情况下由浏览器决定，[当前默认值为 80](https://github.com/chromium/chromium/blob/99314be8152e688bafbbf9a615536bdbb289ea87/headless/lib/browser/protocol/headless_handler.cc#L32)。

仅当 `imageFormat` 为 `"jpeg"` 时才适用，否则此选项无效。

### ~~`quality?`~~

在 `v4.0.0` 中更名为 `jpegQuality`。

### `maxRetries?`

_可选 - 默认 `1`_

帧渲染可以重试多少次，直到失败。

:::note
仅当错误在 [不稳定错误列表](https://github.com/remotion-dev/remotion/blob/main/packages/lambda/src/shared/is-flaky-error.ts) 中时才执行重试。
:::

### `envVariables?`

_可选 - 默认 `{}`_

请参阅 [`renderStill() -> envVariables`](/docs/renderer/render-still#envvariables)。

### `forceHeight?`

_可选，从 v3.2.40 开始可用_

覆盖默认合成高度。

### `forceWidth?`

_可选，从 v3.2.40 开始可用_

覆盖默认合成宽度。

### `scale?`

_可选_

通过因子缩放输出尺寸。请参阅 [Scaling](/docs/scaling) 了解更多关于此功能的信息。

### `outName?`

_可选_

可以是以下之一：

- `undefined` - 默认为 `out` 加上适当的文件扩展名，例如：`renders/${renderId}/out.mp4`。
- 一个 `string` - 将保存到与您的站点相同的 S3 存储桶中，键为 `renders/{renderId}/{outName}`。请确保在字符串末尾包含文件扩展名。
- 如果要渲染到不同的存储桶或云提供商，则为一个对象 - [请参见此处以获取详细说明](/docs/lambda/custom-destination)。

{/*/examples*/}

### `timeoutInMilliseconds?`

_可选_

描述渲染可能需要多长时间来解析所有 [`delayRender()`](/docs/delay-render) 调用 [在超时之前](/docs/timeout)。默认值：`30000`

{/*/examples*/}

### `downloadBehavior?`

_可选，自 v3.1.5 起可用_

在通过浏览器中的 S3 输出链接访问输出文件时应如何行为。

要么：

- `{"type": "play-in-browser"}` - 默认值。视频将在浏览器中播放。
- `{"type": "download", fileName: null}` 或 `{"type": "download", fileName: "download.mp4"}` - 将添加一个 `Content-Disposition` 头，使浏览器下载文件。您可以选择性地覆盖文件名。

{/*/examples*/}

### `offthreadVideoCacheSizeInBytes?`<AvailableFrom v="4.0.23"/>

<Options id="offthreadvideo-cache-size-in-bytes" />

{/*/examples*/}

### `deleteAfter?`<AvailableFrom v="4.0.32"/>

<Options id="delete-after" />

{/*/examples*/}

### `chromiumOptions?`

_可选_

允许您设置某些 Chromium / Google Chrome 标志。参见：[Chromium flags](/docs/chromium-flags)。

{/*/examples*/}

#### `disableWebSecurity`

_boolean - 默认 `false`_

这将主要禁用 CORS 和其他安全功能。

{/*/examples*/}

#### `ignoreCertificateErrors`

_boolean - 默认 `false`_

导致无效的 SSL 证书（例如自签名证书）被忽略。

{/*/examples*/}

#### `gl`

<Options id="gl" />

{/*/examples*/}

#### `userAgent`<AvailableFrom v="3.3.83"/>

允许您设置 headless Chrome 浏览器所假定的自定义用户代理。

{/*/examples*/}

### `forceBucketName?`

_可选_

指定要使用的特定存储桶名称。[不建议这样做](/docs/lambda/multiple-buckets)，而是让 Remotion 自动发现正确的存储桶。 

{/*/examples*/}

### `logLevel?`

_可选_

<Options id="log" />

可以通过此函数返回的 CloudWatch URL 读取日志。

### `forcePathStyle?`<AvailableFrom v="4.0.202" />

将 `forcePathStyle` 传递给 AWS S3 客户端。如果您不知道这是什么，您可能不需要它。

### ~~`dumpBrowserLogs?`~~

_可选 - 默认为 `false`，在 v4.0 中已弃用_

已弃用，建议使用 [`logLevel`](#loglevel)。


## 返回值

返回一个解析为具有以下属性的对象的 Promise：

### `bucketName`

视频保存在其中的 S3 存储桶。

### `url`

可用的 AWS S3 URL，输出可在其中找到。

### `outKey`<AvailableFrom v="4.0.141" />

输出保存的 S3 键。

### `estimatedPrice`

包含关于此操作费用的粗略估算信息的对象。

### `sizeInBytes`

输出图像的大小（以字节为单位）。

### `renderId`

此渲染的唯一字母数字标识符。用于获取状态并在 S3 存储桶中找到相关文件。

### `cloudWatchLogs`

_从 v3.2.10 开始可用_

CloudWatch 的链接（如果您未禁用它），您可以访问以查看渲染的日志。

### `artifacts`<AvailableFrom v="4.0.176"/>

在渲染过程中迄今创建的工件。[请参阅此处以查看处理字段的示例。](/docs/artifacts#using-renderstillonlambda)

## 另请参阅

- [此函数的源代码](https://github.com/remotion-dev/remotion/blob/main/packages/lambda/src/api/render-still-on-lambda.ts)
- [renderMediaOnLambda()](/docs/lambda/rendermediaonlambda)
- [renderStill()](/docs/renderer/render-still)
