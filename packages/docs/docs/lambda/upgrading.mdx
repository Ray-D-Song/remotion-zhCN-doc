---
image: /generated/articles-docs-lambda-upgrading.png
id: upgrading
title: 升级 Lambda
slug: /lambda/upgrading
---

import {Prerelease} from "../../components/PrereleaseVersion"

- 从[发布页面](https://github.com/remotion-dev/remotion/releases)确定最新版本。
- 将所有包升级到最新版本（`@remotion/lambda`，以及 `remotion`，`@remotion/cli` 等）。

<Prerelease onlySnippet packageName="@remotion/lambda"/>

- （可选）：移除旧版本的函数：

:::info
只有在函数不再使用时才应执行此操作。如果仍在生产中使用，请跳过此步骤。
:::

```
npx remotion lambda functions rmall -y
```

- 部署最新版本的 Remotion Lambda 函数：

```
npx remotion lambda functions deploy
```

- 更新站点：

```
npx remotion lambda sites create src/index.ts --site-name=my-name
```

:::info

使用现有站点名称传递 `--site-name` 以更新站点。URL 将保持不变，但旧函数可能无法渲染更新后的站点。

如果不传递 `--site-name`，将生成一个新的站点 URL。您需要更新 [`serveUrl`](/docs/lambda/rendermediaonlambda#serveurl) 参数以在 [`renderMediaOnLambda()`](/docs/lambda/rendermediaonlambda) 调用中指定旧的 serve URL 仍然可以渲染旧部署的函数。
:::

## 分离生产和测试环境

如果您已将 Remotion Lambda 部署到生产环境，您可以在不产生任何停机时间的情况下进行升级：

- 每个部署的函数都有一个版本（使用 `npx remotion lambda functions ls` 查看它们）。
  使用相同版本的 `@remotion/lambda` 包来调用函数。

- 您可以部署具有不同版本的多个函数。使用 [`compatibleOnly`](/docs/lambda/getfunctions#compatibleonly) 参数查找与 `@remotion/lambda` 包版本匹配的函数。

- 站点/`serveUrl` 也与版本相关。使用与渲染站点相同版本的 Remotion 创建它们。如果没有不兼容性，Remotion 将容忍不匹配，但会发出警告，指出您可能没有捆绑站点中的所有最新功能和错误修复。 



Please paste the Markdown content you'd like me to translate into Chinese.
