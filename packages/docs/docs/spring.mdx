---
image: /generated/articles-docs-spring.png
id: spring
title: spring()
crumb: "API"
---

一个基于物理的动画原语。

示例:

```tsx twoslash title="spring-example.ts"
import { spring, useCurrentFrame, useVideoConfig } from "remotion";
// ---cut---
const frame = useCurrentFrame();
const { fps } = useVideoConfig();

const value = spring({
  frame,
  fps,
  config: {
    stiffness: 100,
  },
});
```

## 弹簧编辑器

访问 [springs.remotion.dev](https://springs.remotion.dev) 来调整弹簧动画参数并查看它们对动画的影响。

## 参数

### `frame`

当前时间值。大多数情况下，您希望传入 [`useCurrentFrame()`](/docs/use-current-frame) 的返回值。弹簧动画从第 0 帧开始，因此如果您想延迟动画，可以传入不同的值，如 `frame - 20`。

### `from`

_默认:_ `0`

动画的初始值。

### `to`

_默认:_ `1`

动画的结束值。请注意，根据参数设置，弹簧动画可能会在最终目标之前稍微超出，然后反弹回最终目标。

### `fps`

弹簧动画应该计算多少帧每秒。这应该始终是 [`useVideoConfig()`](/docs/use-video-config) 的返回值的 `fps` 属性。

### `reverse`<AvailableFrom v="3.3.92" />

_默认:_ `false`

以相反顺序渲染动画。参见：[操作顺序](#order-of-operations)

### `config`

一个可选对象，允许您自定义动画的物理属性。

#### mass

_默认:_ `1`

弹簧的重量。如果减少质量，动画会变得更快！

#### damping

_默认:_ `10`

动画减速的程度。

#### stiffness

_默认:_ `100`

弹簧刚度系数。调整此参数会影响动画的弹性。

#### overshootClamping

_默认:_ `false`

确定动画是否可以超过 `to` 值。如果设置为 true，如果动画超过 `to`，它将返回 `to` 的值。

### `durationInFrames`<AvailableFrom v="3.0.27" />

_可选_

拉伸动画曲线，使其正好与您指定的长度相同。

```tsx twoslash title="spring-example.ts"
import { spring, useCurrentFrame, useVideoConfig } from "remotion";
// ---cut---
const frame = useCurrentFrame();
const { fps } = useVideoConfig();

const value = spring({
  frame,
  fps,
  config: {
    stiffness: 100,
  },
  durationInFrames: 40,
});
```

请参阅：[运算顺序](#order-of-operations)

### `durationRestThreshold`<AvailableFrom v="3.0.27" />

_可选_

动画应接近结束以便被视为已完成计算持续时间。仅在同时指定 `durationInFrames` 时有效。

例如，如果给定 `durationRestThreshold` 为 `0.001`，并且 `durationOfFrames` 为 `30`，则意味着在经过 30 帧后，弹簧已达到距离结束值的 99.9%（`1 - 0.001 = 0.999`）。

### `delay`<AvailableFrom v="3.3.90" />

_可选_

延迟动画多少帧。

例如，如果给定 `delay` 为 `25`，则帧 0-24 将返回初始值，并且动画将从第 25 帧开始。请参阅：[运算顺序](#order-of-operations)

## 运算顺序

以下是应用 `durationInFrames`、`reverse` 和 `delay` 操作的顺序：

<Step>1</Step> 首先，将弹簧动画拉伸到您传递的持续时间，使用 <a href="#durationinframes"><code>durationInFrames</code></a>，如果您传递了持续时间。<br/>
<Step>2</Step> 然后，如果传递了 <a href="#reverse-"><code>reverse: true</code></a>，则反转动画。<br/>
<Step>3</Step> 然后，如果传递了 <a href="#delay-"><code>delay</code></a>，则延迟动画。

## 信用

此函数取自 [Reanimated 2](https://github.com/software-mansion/react-native-reanimated)，它本身对 Remotion 有很大的启发。

## 请参阅

- [弹簧动画示例](/docs/animating-properties#using-spring-animations)
- [此函数的源代码](https://github.com/remotion-dev/remotion/blob/main/packages/core/src/spring/index.ts)
- [interpolate()](/docs/interpolate)
- [measureSpring()](/docs/measure-spring)
