---
image: /generated/articles-docs-troubleshooting-background-image.png
sidebar_label: 使用背景图像时闪烁
title: 使用背景图像或遮罩图像时出现闪烁
crumb: "常见错误"
---

在 Remotion 中不建议使用以下代码：

```tsx twoslash title="❌ 不要这样做"
const src = "abc";
// ---cut---
const myMarkup = (
  <div
    style={{
      backgroundImage: `url(${src})`,
    }}
  >
    <p>Hello World</p>
  </div>
);
```

## 问题

Remotion 无法确定图像何时加载完成，因为通过 `background-image`、`mask-image` 或其他 CSS 属性加载图像时无法确定。这将导致 Remotion 在渲染过程中不等待图像加载完成，从而导致可见的闪烁。

## 解决方案

使用 [`<Img>`](/docs/img) 标签，并将其放置在 [`<AbsoluteFill>`](/docs/absolute-fill) 中：

```tsx twoslash title="✅ 这样做"
const src = "abc";
// ---cut---
import { AbsoluteFill, Img } from "remotion";

const myMarkup = (
  <AbsoluteFill>
    <AbsoluteFill>
      <Img
        style={{
          width: "100%",
        }}
        src={src}
      />
    </AbsoluteFill>
    <AbsoluteFill>
      <p>Hello World</p>
    </AbsoluteFill>
  </AbsoluteFill>
);
```

下一个将放置在图像上方，不会闪烁。

## 解决方法

如果无法使用 [`<Img>`](/docs/img) 标签，例如因为需要使用 `mask-image()`，则渲染一个渲染相同 src 的相邻 `<Img>` 标签，并将其放置在视口之外：

```tsx twoslash title="✅ 这样做"
const src = "abc";
// ---cut---
import { Img } from "remotion";

const myMarkup = (
  <>
    <Img
      src={src}
      style={{
        opacity: 0,
        position: "absolute",
        left: "-100%",
      }}
    />
    <div
      style={{
        maskImage: `url(${src})`,
      }}
    >
      <p>Hello World</p>
    </div>
  </>
);
```

隐藏的 `<Img>` 标签确保图像将完全下载，从而使 `background-image` 完全渲染。

## 参见

- [`<Img>`](/docs/img)
- [闪烁](/docs/flickering)
- [使用 Next.js 的 Image 标签时出现闪烁](/docs/troubleshooting/nextjs-image) 


