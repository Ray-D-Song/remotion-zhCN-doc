---
image: /generated/articles-docs-paths-get-instruction-index-at-length.png
title: getInstructionIndexAtLength()
crumb: "@remotion/paths"
---

_属于[`@remotion/paths`](/docs/paths)包。_

_从v4.0.84版本开始可用。_

获取路径长度处指令的索引。  
第一个参数是SVG路径，第二个参数是应该采样点的长度。  
它必须介于`0`和[`getLength()`](/docs/paths/get-length)的返回值之间。

如果路径有效，则返回一个包含`index`和`lengthIntoInstruction`的对象：

```tsx twoslash title="示例"
import { getInstructionIndexAtLength } from "@remotion/paths";

const { index, lengthIntoInstruction } = getInstructionIndexAtLength(
  "M 0 0 L 100 0 L 200 0",
  105,
);
console.log(index); // 1
console.log(lengthIntoInstruction); // 5
```

要获取特定索引处的指令，可以使用[`parsePath()`](/docs/paths/parse-path)：

```tsx twoslash title="获取指令"
import { getInstructionIndexAtLength, parsePath } from "@remotion/paths";

const path = "M 0 0 L 100 0 L 200 0";
const { index } = getInstructionIndexAtLength(path, 105);

const parsed = parsePath(path);
const instruction = parsed[index]; // {type: 'L', x: 100, y: 0}
```

如果路径无效，该函数**将抛出异常**：

```tsx twoslash
import { getInstructionIndexAtLength } from "@remotion/paths";
// ---cut---
getInstructionIndexAtLength("remotion", 50); // Error: Malformed path data: ...
```

如果采样长度大于路径的[长度](/docs/paths/get-length)，该函数**将抛出异常**：

```tsx twoslash
import { getInstructionIndexAtLength } from "@remotion/paths";
// ---cut---
getInstructionIndexAtLength("M 0 0 L 100 0", 105); // Error: A length of 105 was passed to getInstructionIndexAtLength() but the total length of the path is only 100;
```

## Credits

此函数改编自[svg-path-properties](https://www.npmjs.com/package/svg-path-properties)。

## 另请参阅

- [`getLength()`](/docs/paths/get-length)
- [`parsePath()`](/docs/paths/parse-path)
- [`@remotion/paths`](/docs/paths)
- [此函数的源代码](https://github.com/remotion-dev/remotion/blob/main/packages/paths/src/get-instruction-index-at-length.ts)

