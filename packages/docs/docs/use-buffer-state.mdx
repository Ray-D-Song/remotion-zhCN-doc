---
image: /generated/articles-docs-use-buffer-state.png
title: useBufferState()
id: use-buffer-state
crumb: "API"
---

_ä»4.0.111ç‰ˆæœ¬å¼€å§‹å¯ç”¨_

æ‚¨å¯ä»¥åœ¨æ‚¨çš„[ç»„åˆ](/docs/terminology/composition)ä¸­ä½¿ç”¨æ­¤é’©å­æ¥æ£€ç´¢å¯ä»¥é€šçŸ¥æ’­æ”¾å™¨æ‚¨çš„ç»„ä»¶å½“å‰æ­£åœ¨åŠ è½½æ•°æ®çš„å‡½æ•°ã€‚

```tsx twoslash title="MyComp.tsx"
import React from "react";
import { useBufferState } from "remotion";

const MyComp: React.FC = () => {
  const buffer = useBufferState();

  React.useEffect(() => {
    const delayHandle = buffer.delayPlayback();

    setTimeout(() => {
      delayHandle.unblock();
    }, 5000);

    return () => {
      delayHandle.unblock();
    };
  }, []);

  return <></>;
};
```

## API

è¿”å›ä¸€ä¸ªå…·æœ‰ä¸€ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼š

### `delayPlayback()`

å‘Šè¯‰æ’­æ”¾å™¨å»¶è¿Ÿæ’­æ”¾ï¼Œç›´åˆ°æ‚¨è°ƒç”¨`unblock()`ã€‚

## ä½¿ç”¨è¯´æ˜

### å¤„ç†å¸è½½

ç”¨æˆ·å¯èƒ½ä¼šå¯»æ‰¾è§†é¢‘çš„ä¸åŒéƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†ç«‹å³å¯ç”¨ã€‚  
ä½¿ç”¨<code>useEffect()</code>çš„æ¸…ç†å‡½æ•°åœ¨æ‚¨çš„ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å¤„ç†ã€‚

```tsx twoslash title="âŒ ä¸Reactä¸¥æ ¼æ¨¡å¼å†²çª"
import React, { useState } from "react";
import { useBufferState } from "remotion";

const MyComp: React.FC = () => {
  const buffer = useBufferState();
  const [delayHandle] = useState(() => buffer.delayPlayback()); // ğŸ’¥

  React.useEffect(() => {
    setTimeout(() => {
      delayHandle.unblock();
    }, 5000);
  }, []);

  return <></>;
};
```

### é¿å…åœ¨`useState()`å†…è°ƒç”¨

è™½ç„¶ä»¥ä¸‹å®ç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æœ‰æ•ˆï¼Œä½†åœ¨å¼€å‘ä¸­å¤±è´¥ï¼Œå¦‚æœæ‚¨åœ¨Reactä¸¥æ ¼æ¨¡å¼å†…éƒ¨ï¼Œå› ä¸º`useState()`é’©å­è¢«è°ƒç”¨ä¸¤æ¬¡ï¼Œå¯¼è‡´ç¼“å†²çš„ç¬¬ä¸€æ¬¡è°ƒç”¨æ°¸è¿œä¸ä¼šè¢«æ¸…é™¤ï¼Œè§†é¢‘å°†æ°¸è¿œç¼“å†²ã€‚

```tsx twoslash title="âŒ åœ¨å¯»æ‰¾è§†é¢‘çš„ä¸åŒéƒ¨åˆ†æ—¶ä¸æ¸…é™¤ç¼“å†²å¤„ç†"
import React, { useState } from "react";
import { useBufferState } from "remotion";

const MyComp: React.FC = () => {
  const buffer = useBufferState();
  const [delayHandle] = useState(() => buffer.delayPlayback()); // ğŸ’¥

  React.useEffect(() => {
    setTimeout(() => {
      delayHandle.unblock();
    }, 5000);

    return () => {
      delayHandle.unblock();
    };
  }, []);

  return <></>;
};
```

### ä¸`delayRender()`ä¸€èµ·ä½¿ç”¨

[`delayRender()`](/docs/delay-render)æ˜¯ä¸€ä¸ªåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å‘æŒ¥ä½œç”¨çš„ä¸åŒAPIã€‚

å¦‚æœæ‚¨æ­£åœ¨åŠ è½½æ•°æ®ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å»¶è¿Ÿç»„ä»¶çš„æˆªå›¾ä»¥åŠåœ¨é¢„è§ˆæœŸé—´å¯åŠ¨ç¼“å†²çŠ¶æ€ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªAPIã€‚

```tsx twoslash title="åŒæ—¶ä½¿ç”¨delayRender()å’ŒdelayPlayback()"
import React from "react";
import { useBufferState, delayRender, continueRender } from "remotion";

const MyComp: React.FC = () => {
  const buffer = useBufferState();
  const [handle] = React.useState(() => delayRender());

  React.useEffect(() => {
    const delayHandle = buffer.delayPlayback();

    setTimeout(() => {
      delayHandle.unblock();
      continueRender(handle);
    }, 5000);

    return () => {
      delayHandle.unblock();
    };
  }, []);

  return <></>;
};
```

## å‚è§

- [ç¼“å†²çŠ¶æ€](/docs/player/buffer-state)

