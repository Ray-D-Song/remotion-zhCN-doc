---
image: /generated/articles-docs-miscellaneous-chrome-headless-shell.png
sidebar_label: Chrome Headless Shell
title: Chrome Headless Shell
crumb: "FAQ"
---

# Chrome Headless Shell<AvailableFrom v="4.0.137"/>

如果找不到本地浏览器并且使用 API 渲染视频，则 Remotion 将下载 [Chrome Headless Shell](https://developer.chrome.com/blog/chrome-headless-shell)。

## 支持的平台

支持以下平台：

- Linux（x64）
- Windows（x64）
- macOS（x64 和 arm64）

:::note
尽管在 Linux 上是 arm64，但 [Remotion Lambda](/docs/lambda) 也提供支持。
:::

## 确保找到本地浏览器

使用 [`ensureBrowser()`](/docs/renderer/ensure-browser) 或 [`npx remotion browser ensure`](/docs/cli/browser/ensure) 来确保找到本地浏览器。  
如果找不到本地浏览器，此函数将下载 Chrome Headless Shell。

## 自定义二进制文件

如果您不希望安装 Chrome Headless Shell 或您的平台不受支持，则需要指定自己的基于 Chromium 的浏览器：

- 在配置文件中使用 [`setBrowserExecutable()`](/docs/config#setbrowserexecutable) 选项（用于 CLI）
- 在 [`renderMedia()`](/docs/renderer/render-media) 和其他 SSR API 中使用 [`browserExecutable`](/docs/renderer/render-media) 选项

在 [Lambda](/docs/lambda) 和 [Cloud Run](/docs/cloudrun) 中，Chrome 的某个版本已经安装，因此您无需执行任何操作。

:::note
在未来的 Chrome 版本中，桌面浏览器中的无头模式将停止支持，您将需要使用 Chrome Headless Shell。
:::

## 下载位置

Chrome Headless Shell 将下载到

```
node_modules/.remotion/chrome-headless-shell/[platform]/chrome-headless-shell-[platform]
```

`platform` 可以是 `mac-arm64`、`mac-x64`、`linux64` 或 `win64` 中的一个。

在此路径下，将创建一个包含必要文件的文件夹。  
将创建一个可执行文件 `./chrome-headless-shell`（在 Windows 上为 `.\chrome-headless-shell.exe`）。

## Chrome vs. Chrome Headless Shell

Chrome 曾经附带一个 `--headless` 标志，Remotion 将使用它。

截至 Chrome 123，无头模式分为：

- `--headless=old`，适用于截图（因此适用于 Remotion）
- `--headless=new`，适用于浏览器测试

`--headless=old` 将在未来的 Chrome 版本中停止工作。  
旧的无头模式正在被提取到 "Chrome 无头 Shell" 中。

因此，我们鼓励您使用 Chrome 无头 Shell 来未来保护您的 Remotion 应用程序。

## Chrome 与 Chromium

Chromium 是 Chrome 基于的开源项目。某些版本的 Chromium 不具备 [`<Video>`](/docs/video) 标签以及 [`@remotion/media-utils`](/docs/media-utils) 中的功能所需的编解码器。

这就是为什么我们推荐使用 Chrome 而不是 Chromium。

## Remotion v5.0 中的更改

Remotion 5.0 将不再识别您的常规 Chrome 浏览器。  
您将需要使用 Chrome 无头 Shell，因为 Chrome 正在[停止 `--headless=old`](#chrome-vs-chrome-headless-shell) 模式。

## Thorium（v4.0.18 - v4.0.135）

在这些版本中，如果找不到本地浏览器，将下载 [Thorium](https://thorium.rocks/) 的一个实例。

Thorium 是一个基于 Chromium 分支的免费开源浏览器，包含渲染视频所需的编解码器。

## Chromium（v4.0.18 之前）

在之前的版本中，Remotion 会下载 Chromium 的免费版本，该版本不包含专有的 H.264 和 H.265 编解码器。
这通常会导致在使用 [`<Video>`](/docs/video) 标签时出现问题。

## 另请参阅

- [`ensureBrowser()`](/docs/renderer/ensure-browser)
- [媒体播放错误](/docs/media-playback-error)
