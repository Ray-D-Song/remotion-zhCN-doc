---
image: /generated/articles-docs-cloudrun-renderstilloncloudrun.png
id: renderstilloncloudrun
title: renderStillOnCloudrun()
crumb: "Cloud Run API"
---

<ExperimentalBadge>
  <p>
    Cloud Run 处于 <a href="/docs/cloudrun-alpha">Alpha</a> 阶段，这意味着 API 可能会在任何版本中更改，文档尚未完成。请查看{' '}<a href="https://remotion.dev/changelog">更改日志</a> 以了解最新的重大更改。
  </p>
</ExperimentalBadge>

在 Remotion Cloud Run 上启动静态渲染过程。

需要已部署 [服务](/docs/cloudrun/deployservice) 才能执行渲染。  
需要指定一个 [站点](/docs/cloudrun/deploysite) 或 [Serve URL](/docs/terminology/serve-url) 来确定将要渲染的内容。

## 示例

```tsx twoslash
// @module: esnext
// @target: es2017
// ---cut---
import { renderStillOnCloudrun } from "@remotion/cloudrun/client";

const result = await renderStillOnCloudrun({
  region: "us-east1",
  serviceName: "remotion-render-bds9aab",
  composition: "MyStill",
  imageFormat: "png",
  serveUrl:
    "https://storage.googleapis.com/remotioncloudrun-123asd321/sites/abcdefgh",
});

if (result.type === "success") {
  console.log(result.bucketName);
  console.log(result.renderId);
}
```

:::note
从 [`@remotion/cloudrun/client`](/docs/cloudrun/light-client) 导入，以避免加载整个渲染器，因为它无法捆绑。
:::

## 参数

一个具有以下属性的对象：

### `cloudRunUrl?`

_可选。如果未提供 serviceName，则必填_

应用于执行渲染的 Cloud Run 服务的 URL。您必须设置 cloudRunUrl 或 serviceName，但不能同时设置两者。

### `serviceName?`

_可选。如果未提供 cloudRunUrl，则必填_

应用于执行渲染的 Cloud Run 服务的名称。这与区域一起使用，以确定服务端点，因为相同的服务名称可以存在于多个区域。

### `region`

您的 Cloud Run 服务部署在哪个 [GCP 区域](/docs/cloudrun/region-selection)。强烈建议您的 Remotion 站点也位于同一区域。

### `serveUrl`

指向 Remotion 项目的 URL。使用 [`deploySite()`](/docs/cloudrun/deploysite) 部署 Remotion 项目。

### `composition`

您要渲染的 [composition](/docs/composition) 的 `id`。

### `inputProps?`

_可选_

[传递给视频所选 composition 的输入属性。](/docs/passing-props#passing-input-props-in-the-cli)。  
必须是一个 JSON 对象。  
从根组件可以使用 [`getInputProps()`](/docs/get-input-props) 读取属性。  
您可以使用 [`calculateMetadata()`](/docs/calculate-metadata) 转换输入属性。

### `隐私?`

_可选_

其中之一：

- `"public"`（_默认_）：渲染的静态图在 Cloud Storage URL 下是公开可访问的。
- `"private"`：渲染的静态图不是公开可用的，但对具有正确权限的 GCP 项目内的用户可用。

### `downloadBehavior?`<AvailableFrom v="4.0.176"/>

在浏览器通过 Cloud Storage 输出链接访问输出文件时的行为。

- `{"type": "play-in-browser"}` - 默认行为。视频将在浏览器中播放。
- `{"type": "download", fileName: null}` 或 `{"type": "download", fileName: "download.mp4"}` - 将添加一个 `Content-Disposition` 头，使浏览器下载文件。您可以选择性地覆盖文件名。

### `forceBucketName?`

_可选_

指定用于输出的特定存储桶名称。生成的 Google Cloud Storage URL 将采用格式 `gs://{bucket-name}/renders/{render-id}/{file-name}`。如果未设置，Remotion 将根据区域选择正确的存储桶。

### `jpegQuality?`

_可选_

请参阅 [`renderStill() -> jpegQuality`](/docs/renderer/render-still#jpegquality)。

### `imageFormat?`

_可选_

请参阅 [`renderStill() -> imageFormat`](/docs/renderer/render-still#imageformat)。

### `scale?`

_可选_

通过因子缩放输出尺寸。请参阅[缩放](/docs/scaling)以了解更多关于此功能的信息。

### `envVariables?`

_可选_

请参阅 [`renderStill() -> envVariables`](/docs/renderer/render-still#envvariables)。

### `frame?`

_可选_

应该渲染哪一帧合成。帧是从零开始索引的，允许负值，-1 表示最后一帧。

### `chromiumOptions?`

_可选_

允许您设置某些 Chromium / Google Chrome 标志。请参阅：[Chromium 标志](/docs/chromium-flags)。

#### `disableWebSecurity`

_布尔值 - 默认 `false`_

这将主要禁用 CORS 等安全功能。

#### `ignoreCertificateErrors`

_布尔值 - 默认 `false`_

导致无效的 SSL 证书（如自签名证书）被忽略。

#### `gl`

<Options id="gl" />

### `forceWidth?`

_可选_

覆盖默认合成宽度。

### `forceHeight?`

_可选_

覆盖默认合成高度。

### `logLevel?`

<Options id="log" />

### `outName?`

_可选_

静态输出文件的文件名。

可以是：

- `undefined` - 默认为 `out` 加上适当的文件扩展名，例如：`renders/${renderId}/out.mp4`。
- 一个 `string` - 将保存到与您的站点相同的云存储桶中，键为 `renders/{renderId}/{outName}`。请确保在字符串末尾包含文件扩展名。

### `delayRenderTimeoutInMilliseconds?`

_可选_

描述渲染可能需要多长时间来解析所有 [`delayRender()`](/docs/delay-render) 调用[在超时之前](/docs/timeout)。默认值：`30000`

### `offthreadVideoCacheSizeInBytes?`<AvailableFrom v="4.0.23"/>

<Options id="offthreadvideo-cache-size-in-bytes" />

## 返回值

返回一个解析为包含以下内容的对象的 Promise：

### `renderId`

此渲染的唯一字母数字标识符。用于获取状态并在云存储桶中找到相关文件。

### `bucketName`

正在保存所有文件的云存储桶名称。

### `privacy`

输出文件的隐私性，可以是：

- "public-read" - 在 Cloud 存储 URL 下公开访问。
- "project-private" - 不公开，但对具有正确权限的 GCP 项目内的用户可用。

### `publicUrl`

如果隐私设置为公开，则这将是渲染文件的公开访问 URL。如果隐私性不是公开的，则为 null。

### `cloudStorageUri`

Google 存储路径，以 `gs://{bucket-name}` 开头。可与 [gsutil](https://cloud.google.com/storage/docs/gsutil) CLI 工具一起使用。

### `size`

以 KB 为单位的渲染静态文件大小。

## 另请参阅

- [此函数的源代码](https://github.com/remotion-dev/remotion/blob/main/packages/cloudrun/src/api/render-still-on-cloudrun.ts)
