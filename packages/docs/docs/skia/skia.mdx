---
image: /generated/articles-docs-skia-skia.png
id: skia
sidebar_label: 概述
title: "@remotion/skia"
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import {ExperimentalBadge} from '../../components/Experimental';

此软件包提供了一些有用的工具，可用于将[React Native Skia](https://github.com/Shopify/react-native-skia)与 Remotion 集成。

<ExperimentalBadge>
此软件包目前仅用作技术验证。

在次要版本更新中可能会发生更改。升级时，请监视此文档页面以查看重大更改。
</ExperimentalBadge>

## 安装

安装 `@remotion/skia` 以及 `@shopify/react-native-skia`。

<Tabs
defaultValue="npm"
values={[
{ label: 'npm', value: 'npm', },
{ label: 'yarn', value: 'yarn', },
{ label: 'pnpm', value: 'pnpm', },
]
}>
<TabItem value="npm">

```bash
npm i @remotion/skia @shopify/react-native-skia
```

  </TabItem>

  <TabItem value="yarn">

```bash
yarn add @remotion/skia @shopify/react-native-skia
```

  </TabItem>

  <TabItem value="pnpm">

```bash
pnpm i @remotion/skia @shopify/react-native-skia
```

  </TabItem>
</Tabs>

:::note
自 Remotion `v3.3.93` 和 React Native Skia `0.1.191` 起，`react-native-web` 不再是一个依赖项。您可以从项目中删除它。
:::

还要更新**所有其他 Remotion 软件包**，使它们具有相同的版本：`remotion`、`@remotion/cli` 和其他软件包。

:::note
请确保没有软件包版本号前面有 `^` 字符，因为这可能导致版本冲突。
:::

[覆盖 Webpack 配置](/docs/webpack) 通过使用 [`enableSkia()`](/docs/skia/enable-skia)。

```ts twoslash title="remotion.config.ts"
import { Config } from "@remotion/cli/config";
import { enableSkia } from "@remotion/skia/enable";

Config.overrideWebpackConfig((currentConfiguration) => {
  return enableSkia(currentConfiguration);
});
```

:::note
在 `v3.3.39` 之前，该选项称为 `Config.Bundling.overrideWebpackConfig()`。
:::

接下来，您需要重构[入口点](/docs/terminology/entry-point)文件，以在调用 registerRoot() 之前首先加载 Skia WebAssembly 二进制文件：

```ts twoslash title="src/index.ts"
// @filename: ./Root.tsx
export const RemotionRoot = () => <></>;

// @filename: index.tsx
// ---cut---
import { LoadSkia } from "@shopify/react-native-skia/src/web";
import { registerRoot } from "remotion";

(async () => {
  await LoadSkia();
  const { RemotionRoot } = await import("./Root");
  registerRoot(RemotionRoot);
})();
```

现在，您可以在 Remotion 项目中开始使用 [`<SkiaCanvas>`](/docs/skia/skia-canvas)。

## 模板

您可以在此处找到[起始模板](https://github.com/remotion-dev/template-skia)，或者使用以下命令进行安装：

<Tabs
defaultValue="npm"
values={[
{ label: 'npm', value: 'npm', },
{ label: 'bun', value: 'bun', },
{ label: 'pnpm', value: 'pnpm', },
{ label: 'yarn', value: 'yarn', },
]
}>
<TabItem value="npm">

```bash
npx create-video --skia
```

</TabItem>
<TabItem value="bun">

```bash
bun create video --skia
```

</TabItem>

<TabItem value="yarn">

```bash
yarn create video --skia
```

</TabItem>

<TabItem value="pnpm">

```bash
pnpm create video --skia
```

</TabItem>
</Tabs>

## 渲染

默认情况下，Remotion 渲染是在 CPU 上完成的。一些 Skia 特效依赖于高级 GPU 功能，这可能会导致在 CPU 上运行速度较慢，具体取决于您使用的特效类型。如果您的 Skia 导出速度非常慢，我们发现通过 `--gl=angle` 选项启用 GPU 可显著改善情况。请查看关于[GPU 渲染](/docs/gpu)的文档。

```sh
remotion render Main out/video.mp4 --gl=angle
```

## 资源

- [William Candillon 的示例项目](https://github.com/wcandillon/remotion-skia-tutorial)
- [示例项目的教程](https://www.youtube.com/watch?v=-7MOoWN2_nk)

## API

- [`enableSkia()`](/docs/skia/enable-skia)
- [`<SkiaCanvas />`](/docs/skia/skia-canvas)
